@startuml

package "node-ready"{
    [local-modprobe]
    [udev-trigger]
    [redis]
    [haveged]
    [cgroup]
    [redis]
}

package "boot" {
    [storaged]
    [initnet]
    [networkd]
    [identityd]
}

package "internal modules"{
    [flistd]
    [containerd]
    [contd]
    [upgraded]
    [provisiond]
}

[local-modprobe]<-- [udev-trigger]
[udev-trigger] <-- [storaged]
[udev-trigger] <-- [initnet]
[storaged] <-- [initnet]
[storaged] <-- [identityd]

[identityd] <- [networkd]

[initnet] <-- [networkd]
[networkd] <-- [containerd]
[storaged] <-- [containerd]

[containerd] <-- [contd]

[storaged] <-- [flistd]
[networkd] <-- [flistd]

[flistd] <-- [upgraded]
[networkd] <-- [upgraded]

[networkd] <-- [provisiond]
[flistd] <-- [provisiond]
[contd] <-- [provisiond]

@enduml
